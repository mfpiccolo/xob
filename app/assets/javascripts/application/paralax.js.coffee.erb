$(document).ready ->
  $("a.link").click ->
    $("#wrapper").scrollTo $(this).attr("href"), 800
    setPosition $(this).attr("href"), "#cloud1", "0px", "400px", "800px", "1200px"
    setPosition $(this).attr("href"), "#cloud2", "0px", "800px", "1600px", "2400px"

    #add this
    $("a.link").removeClass "selected"
    $(this).addClass "selected"

    #end add this
    false

  $("a.link").click ->
    if $(this).hasClass "home"
      $("#slide").animate
        left: "40", "slow"
    else if $(this).hasClass "google"
      $("#slide").animate
        left: "140", "slow"
    else if $(this).hasClass "twitter"
      $("#slide").animate
        left: "240", "slow"
    else if $(this).hasClass "bing"
      $("#slide").animate
        left: "340", "slow"

  $("#home-link").click ->
    unless $("div.ui-draggable").hasClass("down")
      $("div.ui-draggable").delay(600).animate
        top: "+=1000px", 320
      $("div.ui-draggable").removeClass("up")
      $("div.ui-draggable").addClass("down")


  $(".results").click ->
    unless $("div.ui-draggable").hasClass("up")
      $("div.ui-draggable").animate
        top: "-=1000px", 320
      $("div.ui-draggable").addClass("up")
      $("div.ui-draggable").removeClass("down")

  setPosition = (check, div, p1, p2, p3, p4) ->
    if check is "#box1"
      $(div).scrollTo p1, 800
    else if check is "#box2"
      $(div).scrollTo p2, 800
    else if check is "#box3"
      $(div).scrollTo p3, 800
    else
      $(div).scrollTo p4, 800


